(function(e,g){var d=e.document,b=d.documentElement;var f=function(){var p=d.body,l=!-[1,],o=l&&/msie 6/.test(navigator.userAgent.toLowerCase()),h=1,t="cache"+(+new Date()+"").slice(-8),u={};var r=function(){};r.prototype={getOptions:function(v){var x,w={},y={container:null,overlay:true,drag:true,fixed:true,follow:null,followX:0,followY:0,autoClose:0,lock:false,callback:null};for(x in y){w[x]=v[x]!==g?v[x]:y[x]}r.data("options",w);return w},setBodyBg:function(){if(p.currentStyle.backgroundAttachment!=="fixed"){p.style.backgroundImage="url(about:blank)";p.style.backgroundAttachment="fixed"}},appendIframe:function(v){v.innerHTML='<iframe style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;border:0 none;filter:alpha(opacity=0)"></iframe>'},setFollow:function(A,w,v,B){w=typeof w==="string"?d.getElementById(w):w;var z=A.style;z.position="absolute";z.left=r.getOffset(w,"left")+v+"px";z.top=r.getOffset(w,"top")+B+"px"},setPosition:function(x,w){var v=x.style;v.position=o?"absolute":w?"fixed":"absolute";if(w){if(o){v.setExpression("top",'fuckIE6=document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px"')}else{v.top="50%"}v.left="50%"}else{if(o){v.removeExpression("top")}v.top=b.clientHeight/2+r.getScroll("top")+"px";v.left=b.clientWidth/2+r.getScroll("left")+"px"}},createOverlay:function(){var v=d.createElement("div"),w=v.style;w.cssText="margin:0;padding:0;border:none;width:100%;height:100%;background:#333;opacity:0.6;filter:alpha(opacity=60);z-index:9999;position:fixed;top:0;left:0;";if(o){p.style.height="100%";w.position="absolute";w.setExpression("top",'fuckIE6=document.documentElement.scrollTop+"px"')}v.id="overlay";return v},createDialogBox:function(){var v=d.createElement("div");v.style.cssText="margin:0;padding:0;border:none;z-index:10000;";v.id="easyDialogBox";return v},createDialogWrap:function(v){var C=v.header?'<h4 class="easyDialog_title" id="easyDialogTitle"><a href="javascript:void(0)" title="关闭窗口" class="close_btn" id="closeBtn">&times;</a>'+v.header+"</h4>":"",B=typeof v.yesFn==="function"?'<button class="btn_highlight" id="easyDialogYesBtn">'+(typeof v.yesText==="string"?v.yesText:"确定")+"</button>":"",y=typeof v.noFn==="function"||v.noFn===true?'<button class="btn_normal" id="easyDialogNoBtn">'+(typeof v.noText==="string"?v.noText:"取消")+"</button>":"",A=B===""&&y===""?"":'<div class="easyDialog_footer">'+y+B+"</div>",x=['<div class="easyDialog_content">',C,'<div class="easyDialog_text">'+v.content+"</div>",A,"</div>"].join(""),z=d.getElementById("easyDialogWrapper"),w=/<[\/]*script[\s\S]*?>/ig;if(!z){z=d.createElement("div");z.id="easyDialogWrapper";z.className="easyDialog_wrapper"}z.innerHTML=x.replace(w,"");return z}};r.data=function(w,z,y){if(typeof w==="string"){if(z!==g){u[w]=z}return u[w]}else{if(typeof w==="object"){var v=w===e?0:w.nodeType===9?1:w[t]?w[t]:(w[t]=++h),x=u[v]?u[v]:(u[v]={});if(y!==g){x[z]=y}return x[z]}}};r.removeData=function(y,z){if(typeof y==="string"){delete u[y]}else{if(typeof y==="object"){var v=y===e?0:y.nodeType===9?1:y[t];if(v===g){return}var w=function(B){var A;for(A in B){return false}return true},x=function(){delete u[v];if(v<=1){return}try{delete y[t]}catch(A){y.removeAttribute(t)}};if(z){delete u[v][z];if(w(u[v])){x()}}else{x()}}}};r.event={bind:function(z,y,x){var w=r.data(z,"e"+y)||r.data(z,"e"+y,[]);w.push(x);if(w.length===1){var v=this.eventHandler(z);r.data(z,y+"Handler",v);if(z.addEventListener){z.addEventListener(y,v,false)}else{if(z.attachEvent){z.attachEvent("on"+y,v)}}}},unbind:function(B,A,z){var x=r.data(B,"e"+A);if(!x){return}if(!z){x=g}else{for(var w=x.length-1,y=x[w];w>=0;w--){if(y===z){x.splice(w,1)}}}if(!x||!x.length){var v=r.data(B,A+"Handler");if(B.addEventListener){B.removeEventListener(A,v,false)}else{if(B.attachEvent){B.detachEvent("on"+A,v)}}r.removeData(B,A+"Handler");r.removeData(B,"e"+A)}},eventHandler:function(v){return function(A){A=r.event.fixEvent(A||e.event);var z=A.type,x=r.data(v,"e"+z);for(var w=0,y;y=x[w++];){if(y.call(v,A)===false){A.preventDefault();A.stopPropagation()}}}},fixEvent:function(x){if(x.target){return x}var w={},v;w.target=x.srcElement||document;w.preventDefault=function(){x.returnValue=false};w.stopPropagation=function(){x.cancelBubble=true};for(v in x){w[v]=x[v]}return w}};r.capitalize=function(w){var v=w.charAt(0);return v.toUpperCase()+w.replace(v,"")};r.getScroll=function(v){var w=this.capitalize(v);return b["scroll"+w]||p["scroll"+w]};r.getOffset=function(z,x){var A=this.capitalize(x),w=b["client"+A]||p["client"+A]||0,v=this.getScroll(x),y=z.getBoundingClientRect();return Math.round(y[x])+v-w};r.drag=function(C,B){var D="getSelection" in e?function(){e.getSelection().removeAllRanges()}:function(){try{d.selection.empty()}catch(H){}},G=this,v=G.event,z=false,E=l?C:d,x=B.style.position==="fixed",A=r.data("options").fixed;var F=function(K){z=true;var J=G.getScroll("top"),L=G.getScroll("left"),I=x?0:L,H=x?0:J;r.data("dragData",{x:K.clientX-G.getOffset(B,"left")+(x?L:0),y:K.clientY-G.getOffset(B,"top")+(x?J:0),el:I,et:H,er:I+b.clientWidth-B.offsetWidth,eb:H+b.clientHeight-B.offsetHeight});if(l){if(o&&A){B.style.removeExpression("top")}C.setCapture()}v.bind(E,"mousemove",w);v.bind(E,"mouseup",y);if(l){v.bind(C,"losecapture",y)}K.stopPropagation();K.preventDefault()};v.bind(C,"mousedown",F);var w=function(L){if(!z){return}D();var K=r.data("dragData"),J=L.clientX-K.x,N=L.clientY-K.y,O=K.et,P=K.er,M=K.eb,I=K.el,H=B.style;H.marginLeft=H.marginTop="0px";H.left=(J<=I?I:(J>=P?P:J))+"px";H.top=(N<=O?O:(N>=M?M:N))+"px";L.stopPropagation()};var y=function(I){z=false;if(l){v.unbind(C,"losecapture",arguments.callee)}v.unbind(E,"mousemove",w);v.unbind(E,"mouseup",arguments.callee);if(l){C.releaseCapture();if(o&&A){var H=parseInt(B.style.top)-G.getScroll("top");B.style.setExpression("top","fuckIE6=document.documentElement.scrollTop+"+H+'+"px"')}}I.stopPropagation()}};var k,n=function(v){if(v.keyCode===27){q.close()}},s=function(){if(k){clearTimeout(k);k=g}},m=function(){var w=d.getElementById("easyDialogBox").getElementsByTagName("*");for(i=0;w.length>i;i++){var v=w[i];if(("A"==v.tagName||"BUTTON"==v.tagName||"INPUT"==v.tagName)&&"closeBtn"!=v.id&&!v.disabled&&"none"!=v.style.display&&"hidden"!=v.style.visibility){v.focus();return}}},j=function(w){var v=d.getElementById("easyDialogBox");switch(w.type){case"focusin":if(!v.contains(w.target)){m()}break;case"keydown":if(9==w.keyCode&&!v.contains(w.target)){m();return false}return true}};var q={open:function(){var B=new r(),A=B.getOptions(arguments[0]||{}),N=r.event,D=b.clientWidth,z=b.clientHeight,H=this,O,x,J,w;s();if(A.overlay){O=d.getElementById("overlay");if(!O){O=B.createOverlay();p.appendChild(O);if(o){B.appendIframe(O)}}O.style.display="block"}if(o){B.setBodyBg()}x=d.getElementById("easyDialogBox");if(!x){x=B.createDialogBox();p.appendChild(x)}if(A.follow){var v=function(){B.setFollow(x,A.follow,A.followX,A.followY)};v();N.bind(e,"resize",v);r.data("follow",v);if(O){O.style.display="none"}A.fixed=false}else{B.setPosition(x,A.fixed)}x.style.display="block";J=typeof A.container==="string"?d.getElementById(A.container):B.createDialogWrap(A.container);w=x.getElementsByTagName("*")[0];if(!w){x.appendChild(J)}else{if(w&&J!==w){w.style.display="none";p.appendChild(w);x.appendChild(J)}}J.style.display="block";var C=J.offsetWidth,F=J.offsetHeight,y=C>D,K=F>z;J.style.marginTop=J.style.marginRight=J.style.marginBottom=J.style.marginLeft="0px";if(!A.follow){x.style.marginLeft="-"+(y?D/2:C/2)+"px";x.style.marginTop="-"+(K?z/2:F/2)+"px"}else{x.style.marginLeft=x.style.marginTop="0px"}if(o&&!A.overlay){x.style.width=C+"px";x.style.height=F+"px"}var M=d.getElementById("closeBtn"),E=d.getElementById("easyDialogTitle"),L=d.getElementById("easyDialogYesBtn"),G=d.getElementById("easyDialogNoBtn");m();if(O){N.bind(d,"focusin",j);N.bind(d,"keydown",j)}if(L){N.bind(L,"click",function(Q){if(A.container.yesFn.call(H,Q)!==false){H.close()}})}if(G){var I=function(Q){if(A.container.noFn===true||A.container.noFn.call(H,Q)!==false){H.close()}};N.bind(G,"click",I);if(M){N.bind(M,"click",I)}}else{if(M){N.bind(M,"click",H.close)}}if(!A.lock){N.bind(d,"keyup",n)}if(A.autoClose&&typeof A.autoClose==="number"){k=setTimeout(H.close,A.autoClose)}if(A.drag&&E&&!y&&!K){E.style.cursor="move";r.drag(E,x)}if(!A.follow&&!A.fixed){var P=function(){B.setPosition(x,false)};if(!y&&!K){N.bind(e,"resize",P)}r.data("resize",P)}r.data("dialogElements",{overlay:O,dialogBox:x,closeBtn:M,dialogTitle:E,dialogYesBtn:L,dialogNoBtn:G})},close:function(){var v=r.data("options"),x=r.data("dialogElements"),w=r.event;s();if(overlay){w.unbind(d,"focusin",j);w.unbind(d,"keydown",j)}if(v.overlay&&x.overlay){x.overlay.style.display="none"}x.dialogBox.style.display="none";if(o){x.dialogBox.style.removeExpression("top")}if(x.closeBtn){w.unbind(x.closeBtn,"click")}if(x.dialogTitle){w.unbind(x.dialogTitle,"mousedown")}if(x.dialogYesBtn){w.unbind(x.dialogYesBtn,"click")}if(x.dialogNoBtn){w.unbind(x.dialogNoBtn,"click")}if(!v.follow&&!v.fixed){w.unbind(e,"resize",r.data("resize"));r.removeData("resize")}if(v.follow){w.unbind(e,"resize",r.data("follow"));r.removeData("follow")}if(!v.lock){w.unbind(d,"keyup",n)}if(typeof v.callback==="function"){v.callback.call(q)}r.removeData("options");r.removeData("dialogElements")}};return q};var c=function(){e.easyDialog=f()},a=function(){if(d.body){return}try{b.doScroll("left")}catch(h){setTimeout(a,1);return}c()};(function(){if(d.body){c()}else{if(d.addEventListener){d.addEventListener("DOMContentLoaded",function(){d.removeEventListener("DOMContentLoaded",arguments.callee,false);c()},false);e.addEventListener("load",c,false)}else{if(d.attachEvent){d.attachEvent("onreadystatechange",function(){if(d.readyState==="complete"){d.detachEvent("onreadystatechange",arguments.callee);c()}});e.attachEvent("onload",c);var h=false;try{h=e.frameElement==null}catch(j){}if(b.doScroll&&h){a()}}}}})()})(window,undefined);